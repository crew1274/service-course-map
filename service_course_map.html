<html>
<head>
<meta charset="utf-8">
<title>服務學習課程地圖</title>
</head>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/earlyaccess/notosanstc.css" rel="stylesheet">
<body>
  <div id="app" style= "font-family: 'Noto Sans TC','Open Sans', sans-serif;"><!--google font-->
    <gmap-map
      :style="currentStyle"
      :center="center"
      :zoom="12"
      style="width: 100%; height: 100% ; float:left;">
      <gmap-info-window :options="infoOptions" :position="infoWindowPos" :opened="infoWinOpen" :content="infoContent" @closeclick="infoWinOpen=false" >
      </gmap-info-window>
      <gmap-marker
         v-for="(m,i) in markers"
        :position="m.position"
        :clickable="true"
        :draggable="false"
        @click="toggleInfoWindow(m,i)"
        @mouseover="statusText = m.text"
        @mouseout="statusText = null">
      </gmap-marker>
      <div slot="visible" style="top: 5%; right: 5%; color: #4F4F4F; position: absolute; z-index: 100">
         <h2>  {{statusText}} </h2>
      </div>
    </gmap-map>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.6/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.16.4/lodash.js"></script>
<script src="https://cdn.rawgit.com/crew1274/vue2-google-map-example/0934045f/vue-google-maps.js"></script>

<script>
Vue.use(VueGoogleMap, {load: {key: 'AIzaSyBJElK1Oartgr4lYVuNYTaO6GpTlKcXQxk',libraries: 'places'},});

document.addEventListener('DOMContentLoaded', function() {
  new Vue({
    el: '#app',
    data: {
      center: {lat: 23.0197903, lng: 120.4090523},//台南地標
      infoContent: '',
      infoWinOpen: false,
      currentMidx: null,
      infoOptions:{pixelOffset: {width: 0, height: -35}},
      statusText: '',
      //地標
      markers: [
        {
        position: {lat:23.0107572,lng:120.4146771},
        text: '基督教長老教會-岡林教會',
        infoText: '<h2>岡林教會相關的課程資訊:</h2> <p>服務學習(三)-運用遠距課輔關懷偏鄉弱勢學童	徐之昇助理教授	學務處課指組	104(一)、104(二)</p> <p>社會設計的創新方案規劃與實踐	方雅慧博士後研究員	通識教育中心	104(一)</p> <p>服務學習(三)-資訊服務	楊中平副教授	資訊系	104(一)</p> <p>英語智能與社區服務	高實玫教授/鄒文莉教授	通識中心	104(二)、105(二)</p> <p>社會設計的方案規劃與實踐	方雅慧博士後研究員	通識中心	104(二)、105(一)</p> <p>社會設計的方案規劃與實踐	方雅慧博士後研究員	通識中心	104(二)、105(一)</p>'
        }, 
      {
        position: {lat:23.0094592,lng:120.408578},
        text: '公舘社區發展協會',
        infoText: '<h2>公舘社區發展協會相關的課程資訊:</h2><p>人文創新與社會實踐	王秀雲副教授等7人	通識中心	103(二)</p> <p>人道建築的在地規劃與實踐	簡聖芬副教授	通識教育中心	104(一)</p> <p>社會設計的創新方案規劃與實踐	方雅慧博士後研究員	通識教育中心	104(一)、104(二)、105(一)</p> <p>英語智能與社區服務	高實玫教授/鄒文莉教授	通識中心	104(二)</p> <p>社區規劃與地方行銷	張秀慈助理教授	都計系	104(二)</p> <p>自由軟體與社群經營	楊中平副教授	資訊系	104(二)、105(一)</p> <p>創意行銷:社區、文化與場域	仲曉玲助理教授/陳慧琴助理教授	通識中心	105(二)</p>'
      },
      {
        position: {lat:23.0628608,lng:120.3812068},
        text: '左鎮國小',
        infoText: '<h2>左鎮國小相關的課程資訊:</h2> <p>人道建築的在地規劃與實踐 簡聖芬副教授 通識教育中心 105(一)</p>	<p>社會設計的方案規劃與實踐	方雅慧博士後研究員	通識中心	105(一)</p>	<p>社會設計的引導與協作領導	方雅慧博士後研究員	通識中心	105(二)</p>	<p>西拉雅語文數位復育及線上教育	楊中平副教授/盧文祥副教授/陳麗君副教授/方雅慧博士後研究員	通識中心	105(二)</p>'
      },
      ]
    },

    methods:{
        setPlace(place) {
        this.latLng = {
          lat: place.geometry.location.lat(),
          lng: place.geometry.location.lng(),
        }},
        toggleInfoWindow: function (marker,idx){
        this.infoWindowPos = marker.position ;
        this.infoContent = marker.infoText;
        //check if its the same marker that was selected if yes toggle
        if(this.currentMidx == idx)
        {this.infoWinOpen = !this.infoWinOpen}
        //if different marker set infowindow to open and reset current marker index
        else
         {this.infoWinOpen = true;
          this.currentMidx = idx;}
                }}
  });
});
</script>
</body>
</html>